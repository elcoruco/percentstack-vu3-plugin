import{ref as t,computed as e,openBlock as l,createElementBlock as a,normalizeClass as o,normalizeStyle as i,unref as n,createCommentVNode as r,createElementVNode as s,Fragment as u,renderList as h}from"vue";import{scaleLinear as c}from"d3-scale";import"process";const g=s("h1",null,null,-1),v=["viewBox"],d=["transform"],f=["width","height","fill"],m=["width","height","fill","x","onMouseenter"],p=["transform"],x=["x"],b=["x"],w=["x"],k=["innerHTML"];var $={__name:"SimpleStackView",props:{width:Number,height:Number,background:String,data:Array,margin:Object,color:String,baseColor:String,axis:Object,tooltipFn:Function,hideTicks:Boolean},setup($){const y=$,C=1/6*400,M="#C6C6C6",S={position:"bottom",textClass:"",domain:[0,100]},_={top:5,right:5,bottom:C/4,left:5},j=t(!1),T=t=>`${t.key} : ${t.value}`,O=t(""),B=t("0px"),E=t("0px"),F=t("white"),A=t(7),H=e((()=>y.width||400)),L=e((()=>y.height||C)),N=e((()=>y.hideTicks||false)),V=e((()=>y.background||"white")),X=e((()=>{let t;return"top"==y.axis?.position&&(_.bottom=5,_.top=C/4),y.hideTicks&&(_.top=5,_.bottom=5),t=y.margin?Object.assign({},_,y.margin):_,t}));e((()=>y.color||"orange"));const Y=e((()=>y.baseColor||"#ECECEC")),P=e((()=>y.axis?Object.assign(S,y.axis):S)),q=e((()=>y.tooltipFn||T)),z=e((()=>({width:H.value-X.value.left-X.value.right,height:L.value-X.value.top-X.value.bottom}))),D=e((()=>c().domain([0,100]).range([0,z.value.width]))),G=(t,e)=>{if(!e)return 0;let l=0;for(let a=0;a<e;a++)l+=D.value(t[a].value);return l},I=t=>{B.value=`${t.clientY+A.value}px`,E.value=`${t.clientX+A.value}px`},J=()=>{j.value=!1};const K=function*(){for(;;){const t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),l=Math.floor(256*Math.random());yield`rgb(${t}, ${e}, ${l})`}}();return(t,e)=>(l(),a("div",{class:o("gf_simplestack_container")},[g,(l(),a("svg",{ref:"svg",xmlns:"http://www.w3.org/2000/svg",style:i({background:n(V)}),version:"1.2",baseProfile:"tiny",width:"100%",height:"100%",viewBox:`0 0 ${n(H)} ${n(L)}`,"stroke-linecap":"round","stroke-linejoin":"round",class:o("gf_simplestack_svg")},[r(" bars "),s("g",{transform:`translate(${n(X).left}, ${n(X).top})`},[s("rect",{width:n(z).width,height:n(z).height,fill:n(Y)},null,8,f),(l(!0),a(u,null,h($.data,((t,e)=>{return l(),a("rect",{width:n(D)(t.value),height:n(z).height,fill:(o=t,o.color||(o.color=K.next().value),o.color),x:G($.data,e),onMouseenter:e=>((t,e)=>{j.value=!0,O.value=q.value(e),B.value=`${t.clientY+A.value}px`,E.value=`${t.clientX+A.value}px`})(e,t),onMousemove:I,onMouseout:J,key:`bar-${e}`},null,40,m);var o})),128))],8,d),r(" xScaleAxis "),n(N)?r("v-if",!0):(l(),a("g",{key:0,transform:`translate(0, ${n(L)-n(X).bottom})`},[s("text",{class:o(n(P).textClass),fill:M,x:n(X).left,y:5,"alignment-baseline":"hanging","text-anchor":"start"},"0%",10,x),s("text",{class:o(n(P).textClass),fill:M,x:n(X).left+n(z).width/2,y:5,"alignment-baseline":"hanging","text-anchor":"middle"},"50%",10,b),s("text",{class:o(n(P).textClass),fill:M,x:n(X).left+n(z).width,y:5,"alignment-baseline":"hanging","text-anchor":"end"},"100%",10,w)],8,p))],14,v)),j.value?(l(),a("div",{key:0,class:"gf-tooltip",style:i({top:B.value,left:E.value,display:"block",position:"fixed",background:F.value}),innerHTML:O.value},null,12,k)):r("v-if",!0)],2))},__file:"src/SimpleStackView.vue"},y={install:(t,e)=>{t.component("gf-simple-stack",$)}};export{y as default};
